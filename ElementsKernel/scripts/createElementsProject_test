#!/bin/sh 


home_dir=${PWD}
tmploc=$(mktemp -dq -t temp.XXXXXX)

# Clean and exit
clean_and_exit() {
  cd ${home_dir}
  rm -rf ${tmploc}
  exit $1
}

# Move to tmp directory
cd ${tmploc}
export User_area=${tmploc}

CreateElementsProject Project_test 1.0

# if error stop and clean up
if [ $? -ne 0 ]; then
   clean_and_exit 1
fi

# make sure project is created
if [ ! -d Project_test ]; then
   clean_and_exit 1
fi

# make sure project is created
if [ ! -e $User_area/Project_test/1.0/CMakeLists.txt ] ||
   [ ! -e $User_area/Project_test/1.0/Makefile ]; then
   clean_and_exit 1
fi

# Make sure Project_test is there
if [ ! `grep "Project_test 1.0" $User_area/Project_test/1.0/CMakeLists.txt`  ];then
   clean_and_exit 1
fi
echo 'WWWWWWWWWWWWWWWWWWWWWWW'

clean_and_exit 0

exit 0